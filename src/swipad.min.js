/*!
 * TouchSlide v1.1
 * javascript触屏滑动特效插件，移动端滑动特效，触屏焦点图，触屏Tab切换，触屏多图切换等
 * 详尽信息请看官网：http://www.SuperSlide2.com/TouchSlide/
 *
 * Copyright 2013 大话主席
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下可应用于个人或商业用途

 * 1.1 宽度自适应（修复安卓横屏时滑动范围不变的bug）
 */
/**
  * dropload
  * 西门(http://ons.me/526.html)
  * 0.9.0(160215)
  */
/**
  * swipad
  * 修复url带有参数时被覆盖问题
  * v0.3.2
  */
var TouchSlide=function(e){e=e||{};var t={slideCell:e.slideCell||"#touchSlide",titCell:e.titCell||".hd li",mainCell:e.mainCell||".bd",effect:e.effect||"left",autoPlay:e.autoPlay||false,delayTime:e.delayTime||200,interTime:e.interTime||2500,defaultIndex:e.defaultIndex||0,titOnClassName:e.titOnClassName||"on",autoPage:e.autoPage||false,prevCell:e.prevCell||".prev",nextCell:e.nextCell||".next",pageStateCell:e.pageStateCell||".pageState",pnLoop:e.pnLoop=="undefined "?true:e.pnLoop,startFun:e.startFun||null,endFun:e.endFun||null,switchLoad:e.switchLoad||null};var n=document.getElementById(t.slideCell.replace("#",""));if(!n)return false;var a=function(e,t){e=e.split(" ");var n=[];t=t||document;var a=[t];for(var o in e){if(e[o].length!=0)n.push(e[o])}for(var o in n){if(a.length==0)return false;var i=[];for(var s in a){if(n[o][0]=="#")i.push(document.getElementById(n[o].replace("#","")));else if(n[o][0]=="."){var r=a[s].getElementsByTagName("*");for(var l=0;l<r.length;l++){var d=r[l].className;if(d&&d.search(new RegExp("\\b"+n[o].replace(".","")+"\\b"))!=-1){i.push(r[l])}}}else{var r=a[s].getElementsByTagName(n[o]);for(var l=0;l<r.length;l++){i.push(r[l])}}}a=i}return a.length==0||a[0]==t?false:a};var o=function(e,t){var n=document.createElement("div");n.innerHTML=t;n=n.children[0];var a=e.cloneNode(true);n.appendChild(a);e.parentNode.replaceChild(n,e);f=a;return n};var i=function(e,t){var n=0;if(e.currentStyle){n=e.currentStyle[t]}else{n=getComputedStyle(e,false)[t]}return parseInt(n.replace("px",""))};var s=function(e,t){if(!e||!t||e.className&&e.className.search(new RegExp("\\b"+t+"\\b"))!=-1)return;e.className+=(e.className?" ":"")+t};var r=function(e,t){if(!e||!t||e.className&&e.className.search(new RegExp("\\b"+t+"\\b"))==-1)return;e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),"")};var l=t.effect;var d=a(t.prevCell,n)[0];var p=a(t.nextCell,n)[0];var c=a(t.pageStateCell)[0];var f=a(t.mainCell,n)[0];if(!f)return false;var u=f.children.length;var v=a(t.titCell,n);var m=v?v.length:u;var h=t.switchLoad;var w=parseInt(t.defaultIndex);var g=parseInt(t.delayTime);var x=parseInt(t.interTime);var y=t.autoPlay=="false"||t.autoPlay==false?false:true;var b=t.autoPage=="false"||t.autoPage==false?false:true;var D=t.pnLoop=="false"||t.pnLoop==false?false:true;var T=w;var L=null;var k=null;var I=null;var _=0;var C=0;var N=0;var E=0;var U=0;var A=/hp-tablet/gi.test(navigator.appVersion);var S="ontouchstart"in window&&!A;var M=S?"touchstart":"mousedown";var H=S?"touchmove":"";var F=S?"touchend":"mouseup";var Y=0;var W=f.parentNode.clientWidth;var O;var P;var R=u;if(m==0)m=u;if(b){m=u;v=v[0];v.innerHTML="";var q="";if(t.autoPage==true||t.autoPage=="true"){for(var j=0;j<m;j++){q+="<li>"+(j+1)+"</li>"}}else{for(var j=0;j<m;j++){q+=t.autoPage.replace("$",j+1)}}v.innerHTML=q;v=v.children}if(l=="leftLoop"){R+=2;f.appendChild(f.children[0].cloneNode(true));f.insertBefore(f.children[u-1].cloneNode(true),f.children[0])}O=o(f,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>');f.style.cssText="width:"+R*W+"px;"+"position:relative;overflow:hidden;";var z=function(){if(typeof t.startFun=="function"){t.startFun(w,m)}};var B=function(){if(typeof t.endFun=="function"){t.endFun(w,m)}};var X=function(e){var t=(l=="leftLoop"?w+1:w)+e;var n=function(e){var t=f.children[e].getElementsByTagName("img");for(var n=0;n<t.length;n++){if(t[n].getAttribute(h)){t[n].setAttribute("src",t[n].getAttribute(h));t[n].removeAttribute(h)}}};n(t);if(l=="leftLoop"){switch(t){case 0:n(u);break;case 1:n(u+1);break;case u:n(0);break;case u+1:n(1);break}}};var V=function(){W=O.clientWidth;f.style.width=R*W+"px";for(var e=0;e<R;e++){f.children[e].style.width=W+"px"}var t=l=="leftLoop"?w+1:w;Z(-t*W,0)};window.addEventListener("resize",V,false);var Z=function(e,t,n){if(!!n){n=n.style}else{n=f.style}n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms";n.webkitTransform="translate("+e+"px,0)"+"translateZ(0)";n.msTransform=n.MozTransform=n.OTransform="translateX("+e+"px)"};var Q=function(e){switch(l){case"left":if(w>=m){w=e?w-1:0}else if(w<0){w=e?0:m-1}if(h!=null){X(0)}Z(-w*W,g);T=w;break;case"leftLoop":if(h!=null){X(0)}Z(-(w+1)*W,g);if(w==-1){k=setTimeout(function(){Z(-m*W,0)},g);w=m-1}else if(w==m){k=setTimeout(function(){Z(-W,0)},g);w=0}T=w;break}z();I=setTimeout(function(){B()},g);for(var n=0;n<m;n++){r(v[n],t.titOnClassName);if(n==w){s(v[n],t.titOnClassName)}}if(D==false){r(p,"nextStop");r(d,"prevStop");if(w==0){s(d,"prevStop")}else if(w==m-1){s(p,"nextStop")}}if(c){c.innerHTML="<span>"+(w+1)+"</span>/"+m}};Q();if(y){L=setInterval(function(){w++;Q()},x)}if(v){for(var j=0;j<m;j++){(function(){var e=j;v[e].addEventListener("click",function(t){clearTimeout(k);clearTimeout(I);w=e;Q()})})()}}if(p){p.addEventListener("click",function(e){if(D==true||w!=m-1){clearTimeout(k);clearTimeout(I);w++;Q()}})}if(d){d.addEventListener("click",function(e){if(D==true||w!=0){clearTimeout(k);clearTimeout(I);w--;Q()}})}var G;var J=function(e){G=$("body").scrollTop();clearTimeout(k);clearTimeout(I);P=undefined;N=0;var t=S?e.touches[0]:e;_=t.pageX;C=t.pageY;f.addEventListener(H,K,false);f.addEventListener(F,ee,false)};var K=function(e){var t=0;t=$("body").scrollTop();if(t==G){if(S){if(e.touches.length>1||e.scale&&e.scale!==1)return}var n=S?e.touches[0]:e;N=n.pageX-_;E=n.pageY-C;if(typeof P=="undefined"){P=!!(P||Math.abs(N)<Math.abs(E))}if(!P){e.preventDefault();if(y){clearInterval(L)}switch(l){case"left":if(w==0&&N>0||w>=m-1&&N<0){N=N*.4}Z(-w*W+N,0);break;case"leftLoop":Z(-(w+1)*W+N,0);break}if(h!=null&&Math.abs(N)>W/3){X(N>-0?-1:1)}}}};var ee=function(e){if(N==0)return;e.preventDefault();if(!P){if(Math.abs(N)>W/10){N>0?w--:w++}Q(true);if(y){L=setInterval(function(){w++;Q()},x)}}f.removeEventListener(H,K,false);f.removeEventListener(F,ee,false)};f.addEventListener(M,J,false)};!function(e){"use strict";function t(e){e.touches||(e.touches=e.originalEvent.touches)}function n(e,t){t._startY=e.touches[0].pageY,t.touchScrollTop=t.$scrollArea.scrollTop()}function a(t,n){n._curY=t.touches[0].pageY,n._moveY=n._curY-n._startY,n._moveY>0?n.direction="down":n._moveY<0&&(n.direction="up");var a=Math.abs(n._moveY);""!=n.opts.loadUpFn&&n.touchScrollTop<=0&&"down"==n.direction&&!n.isLockUp&&(t.preventDefault(),n.$domUp=e("."+n.opts.domUp.domClass),n.upInsertDOM||(n.$element.prepend('<div class="'+n.opts.domUp.domClass+'"></div>'),n.upInsertDOM=!0),l(n.$domUp,0),a<=n.opts.distance?(n._offsetY=a,n.$domUp.html(n.opts.domUp.domRefresh)):a>n.opts.distance&&a<=2*n.opts.distance?(n._offsetY=n.opts.distance+.5*(a-n.opts.distance),n.$domUp.html(n.opts.domUp.domUpdate)):n._offsetY=n.opts.distance+.5*n.opts.distance+.2*(a-2*n.opts.distance),n.$domUp.css({height:n._offsetY}))}function o(t){var n=Math.abs(t._moveY);""!=t.opts.loadUpFn&&t.touchScrollTop<=0&&"down"==t.direction&&!t.isLockUp&&(l(t.$domUp,300),n>t.opts.distance?(t.$domUp.css({height:t.$domUp.children().height()}),t.$domUp.html(t.opts.domUp.domLoad),t.loading=!0,t.opts.loadUpFn(t)):t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){t.upInsertDOM=!1,e(this).remove()}),t._moveY=0)}function i(e){e.opts.autoLoad&&e._scrollContentHeight-e._threshold<=e._scrollWindowHeight&&r(e)}function s(e){e._scrollContentHeight=e.opts.scrollArea==p?u.height():e.$element[0].scrollHeight}function r(e){e.direction="up",e.$domDown.html(e.opts.domDown.domLoad),e.loading=!0,e.opts.loadDownFn(e)}function l(e,t){e.css({"-webkit-transition":"all "+t+"ms",transition:"all "+t+"ms"})}var d,p=window,c=document,f=e(p),u=e(c);e.fn.dropload=function(e){return new d(this,e)},d=function(e,t){var n=this;n.$element=e,n.upInsertDOM=!1,n.loading=!1,n.isLockUp=!1,n.isLockDown=!1,n.isData=!0,n._scrollTop=0,n._threshold=0,n.init(t)},d.prototype.init=function(s){var l=this;l.opts=e.extend(!0,{},{scrollArea:l.$element,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh">↓下拉刷新</div>',domUpdate:'<div class="dropload-update">↑释放更新</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>',domNoData:'<div class="dropload-noData">暂无数据</div>'},autoLoad:!0,distance:50,threshold:"",loadUpFn:"",loadDownFn:""},s),""!=l.opts.loadDownFn&&(l.$element.append('<div class="'+l.opts.domDown.domClass+'">'+l.opts.domDown.domRefresh+"</div>"),l.$domDown=e("."+l.opts.domDown.domClass)),l._threshold=l.$domDown&&""===l.opts.threshold?Math.floor(1*l.$domDown.height()/3):l.opts.threshold,l.opts.scrollArea==p?(l.$scrollArea=f,l._scrollContentHeight=u.height(),l._scrollWindowHeight=c.documentElement.clientHeight):(l.$scrollArea=l.opts.scrollArea,l._scrollContentHeight=l.$element[0].scrollHeight,l._scrollWindowHeight=l.$element.height()),i(l),f.on("resize",function(){l._scrollWindowHeight=l.opts.scrollArea==p?p.innerHeight:l.$element.height()}),l.$element.on("touchstart",function(e){l.loading||(t(e),n(e,l))}),l.$element.on("touchmove",function(e){l.loading||(t(e,l),a(e,l))}),l.$element.on("touchend",function(){l.loading||o(l)}),l.$scrollArea.on("scroll",function(){l._scrollTop=l.$scrollArea.scrollTop(),""!=l.opts.loadDownFn&&!l.loading&&!l.isLockDown&&l._scrollContentHeight-l._threshold<=l._scrollWindowHeight+l._scrollTop&&r(l)})},d.prototype.lock=function(e){var t=this;void 0===e?"up"==t.direction?t.isLockDown=!0:"down"==t.direction?t.isLockUp=!0:(t.isLockUp=!0,t.isLockDown=!0):"up"==e?t.isLockUp=!0:"down"==e&&(t.isLockDown=!0,t.direction="up")},d.prototype.unlock=function(){var e=this;e.isLockUp=!1,e.isLockDown=!1,e.direction="up"},d.prototype.noData=function(e){var t=this;void 0===e||1==e?t.isData=!1:0==e&&(t.isData=!0)},d.prototype.resetload=function(){var t=this;"down"==t.direction&&t.upInsertDOM?t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){t.loading=!1,t.upInsertDOM=!1,e(this).remove(),s(t)}):"up"==t.direction&&(t.loading=!1,t.isData?(t.$domDown.html(t.opts.domDown.domRefresh),s(t),i(t)):t.$domDown.html(t.opts.domDown.domNoData))}}(window.Zepto||window.jQuery);var itemIndex=0,swpAjaxIndex=0,swpAjaxAllow=true,swiperLoad,dropload;$(function(){swiperLoad=function(e){var t=false,n=/\-?[0-9]+\.?[0-9]*/g,a=window.innerHeight,o=window.innerWidth,i=window.location.href,s=parseInt(i.substring(i.lastIndexOf("#")+11,i.length));e.defaultIndex=typeof s=="number"?s:0;var r={swipadNav:null,swipadView:null,navSlide:true,titOnClassName:"on",defaultIndex:defaultIndex,searchClean:undefined,autoLoad:true,siblings:null,resetSearch:false,noDataTips:"暂无数据",domDown:["上拉加载更多","加载中...","没有更多的内容了..."],loadDownFn:undefined,slideSn:undefined,slideEn:undefined};e.init=function(e){e=$.extend({},r,e);l(e);setTimeout(function(){d(e)},100);setTimeout(function(){u(e);t=true},200)};function l(e){var t="<style>"+".swp-nav {overflow: hidden}"+".swp-gate {display: -webkit-box;display: -webkit-flex;display: flex}"+".swp-cell {display: block;-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;width: 1px}"+".swp-main {display: -webkit-box;display: -webkit-flex;display: flex}"+".swp-item {-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;width: 1px}";"</style>";var n=$('<div><div class="swp-nav"><div class="swp-gate"></div></div><div class="swp-main"></div></div>');for(var a in e.swipadNav){var o=$('<div class="swp-nodata" style="display:none" ><p class="notext">'+e.noDataTips+"</p></div>");var i=$('<div id="swp_'+a+'" class="swp-item"><div class="swp-cont"></div></div>');var s=$('<a class="swp-cell">'+e.swipadNav[a]+"</a>");i.find(".swp-cont").after(o);n.find(".swp-gate").append(s);n.find(".swp-main").append(i)}$("#swipad").append(t,n.html());b(e)}function d(e){TouchSlide({slideCell:"#swipad",titCell:".swp-nav a",mainCell:".swp-main",titOnClassName:e.titOnClassName,defaultIndex:e.defaultIndex,startFun:function(t){itemIndex=t;e.slideSn&&e.slideSn();e.searchClean&&e.searchClean();m(".swp-cell",t);f(t,e)},endFun:function(n){if("pushState"in history){history.state=null;var a={id:n};var o=n;var s=window.location.href;s=s.substring(0,i.lastIndexOf("#"))+"#itemIndex_"+n;history.replaceState(a,o,s)}if(swpAjaxAllow){swpAjaxIndex=n;swpAjaxAllow=false}if($("#swp_"+n).find(".swp-cont").children().length>0){swpAjaxAllow=true}e.slideEn&&e.slideEn();e.resetSearch&&p(e);resetHeight(e);t&&D()}})}function p(e){if($("#swp_"+itemIndex).attr("searched")){$("#swp_"+itemIndex).children().eq(1).hide();$("#swp_"+itemIndex).children().eq(2).show();$("#swp_"+itemIndex).removeAttr("searched").removeAttr("counter").removeAttr("loaded")}}var c=0;function f(e,t){if(c!=e){var n=a;if(t.siblings!=null){for(var o in t.siblings){n-=$(t.siblings[o]).height()}}c=e;$(".swp-main").parent().css("height",n)}}function u(e){dropload=$(".swp-item").dropload({scrollArea:window,domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">'+e.domDown[0]+"</div>",domLoad:'<div class="dropload-load"><span class="loading"></span>'+e.domDown[1]+"</div>",domNoData:'<div class="dropload-noData">'+e.domDown[2]+"</div>"},autoLoad:e.autoLoad,loadDownFn:function(t){e.loadDownFn(t,e)}})}e.error=function(e,t,n){e.lock();e.noData(true);swiperLoad.resetHeight(t);e.resetload();$(n).find(".dropload-noData").html("网络错误，请检查网络连接后刷新本页！");var a=parseInt($(n).attr("counter"))-1;$(n).attr("counter",a)};resetHeight=function(e){var t=0;var n=parseInt($("#swp_"+itemIndex).css("margin-top"))+parseInt($("#swp_"+itemIndex).css("margin-bottom"))+parseInt($("#swp_"+itemIndex).css("padding-top"))+parseInt($("#swp_"+itemIndex).css("padding-bottom"));var o=$("#swp_"+itemIndex).children().eq(0).height()+$("#swp_"+itemIndex).children().eq(2).height();if(e.siblings!=null){for(var i in e.siblings){t+=$(e.siblings[i]).height()}}var s=n+o+t<=a?a-t:n+o;$(".swp-main").parent().css("height",s)};var v=0;function m(e,t){var a=g-x;var o=-(a*h);var i=document.querySelector(e).parentNode;if(v<t){var s=-(h*t-h);if(s<o){s=o}i.style.WebkitTransform="translate3d("+s+"px, 0, 0)";i.style.transform="translate3d("+s+"px, 0, 0)"}else{var r=-(h*t-h);if(r>0){r=0}if(r<=o){r=o}i.style.WebkitTransform="translate3d("+r+"px, 0, 0)";i.style.transform="translate3d("+r+"px, 0, 0)"}y=i.style.transform?parseInt(i.style.transform.match(n)[1]):0;v=t}var h;var w,g,x;var y=0;function b(e){var t=4;if(e.swipadView){t=e.swipadView}g=$(".swp-gate").children().length;x=g<t?g:t;h=o/x;var a=h*g;$(".swp-gate").css("width",a);var i,s,r;var l=document.querySelector(".swp-gate");var d=l.parentNode;w=-(a-o);var p=w-o/3;l.style.WebkitTransitionDuration=".2s";l.style.transitionDuration=".2s";l.style.WebkitTransform="translate3d(0, 0, 0)";l.style.transform="translate3d(0, 0, 0)";d.addEventListener("touchstart",function(e){l.style.WebkitTransitionDuration="0s";l.style.transitionDuration="0s";var t=e.touches[0];i={x:t.pageX,y:t.pageY}});d.addEventListener("touchmove",function(e){e.preventDefault();e.stopPropagation();var t=e.touches[0];s={x:t.pageX,y:t.pageY};var a=s.x-i.x;var d=s.y-i.y;var c=parseInt(Math.sqrt(Math.pow(Math.abs(a),2)+Math.pow(Math.abs(d),2)));r=l.style.transform?l.style.transform.match(n)[1]:0;if(a>0){if(r<o/3){c=y+c;l.style.WebkitTransform="translate3d("+c+"px, 0, 0)";l.style.transform="translate3d("+c+"px, 0, 0)"}}else{if(r>p){c=y-c;l.style.WebkitTransform="translate3d("+c+"px, 0, 0)";l.style.transform="translate3d("+c+"px, 0, 0)"}}});d.addEventListener("touchend",function(e){y=l.style.transform?parseInt(l.style.transform.match(n)[1]):0;l.style.WebkitTransitionDuration=".2s";l.style.transitionDuration=".2s";if(y>0){l.style.WebkitTransform="translate3d(0, 0, 0)";l.style.transform="translate3d(0, 0, 0)";y=0}else if(y<w){l.style.WebkitTransform="translate3d("+w+"px, 0, 0)";l.style.transform="translate3d("+w+"px, 0, 0)";y=w}})}function D(){if(!$("#swp_"+itemIndex).attr("loaded")){dropload.unlock();dropload.noData(false)}else{dropload.lock();dropload.noData()}dropload.resetload()}return e}(this)});function noData(e){$("#swp_"+itemIndex).attr("loaded",true);e.lock();e.noData();e.resetload();if($("#swp_"+itemIndex).find(".swp-cont").children().length==0){$("#swp_"+itemIndex).children().eq(1).show();$("#swp_"+itemIndex).children().eq(2).hide()}}String.prototype.temp=function(e){return this.replace(/\$\w+\$/gi,function(t){var n=e[t.replace(/\$/g,"")];return n+""=="undefined"?"":n})};